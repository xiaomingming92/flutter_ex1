# è½¯ä»¶ç‰ˆæœ¬æ›´æ–°æ¨é€åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿°äº† ex1 é¡¹ç›®çš„è½¯ä»¶ç‰ˆæœ¬æ›´æ–°æ¨é€åŠŸèƒ½çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¸ªäººä¿¡æ¯é¡µé¢æ”¹è¿›ã€è®¾ç½®é¡µé¢è®¾è®¡å’Œç‰ˆæœ¬æ›´æ–°æœºåˆ¶ã€‚

## åŠŸèƒ½éœ€æ±‚åˆ†æ

### 1. ä¸ªäººä¸­å¿ƒé¡µé¢ (ç”± ProfilePage æ”¹ä¸º PersonalCenterPage) æ”¹è¿›

**å½“å‰çŠ¶æ€ï¼š**
- åŸºç¡€çš„ä¸ªäººä¸­å¿ƒé¡µé¢ï¼ŒåŒ…å«æ ‡é¢˜å’Œç™»å‡ºæŒ‰é’®
- ç®€å•çš„ Column å¸ƒå±€

**ç›®æ ‡è®¾è®¡ï¼š**
- **ä¸ªäººä¿¡æ¯åŒºåŸŸ**ï¼šé«˜åº¦è¾ƒé«˜çš„å±•ç¤ºåŒºåŸŸï¼ŒåŒ…å«ç”¨æˆ·å¤´åƒã€å§“åã€æ€§åˆ«ç­‰ä¿¡æ¯
- **æ“ä½œæŒ‰é’®åŒºåŸŸ**ï¼šç¼–è¾‘èµ„æ–™ã€è®¾ç½®ä¸¤ä¸ªæŒ‰é’®
- **UGC å†…å®¹åŒºåŸŸ**ï¼šå±•ç¤ºç”¨æˆ·çš„åŸåˆ›å†…å®¹ï¼ˆå¸–å­ã€è¯„è®ºç­‰ï¼‰

### 2. è®¾ç½®é¡µé¢è®¾è®¡

**é¡µé¢ç»“æ„ï¼š**
- é‡‡ç”¨ Column å¸ƒå±€å±•ç¤ºè®¾ç½®é¡¹ç›®
- åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š
  - è´¦å·ä¸å®‰å…¨
  - é€šç”¨è®¾ç½®  
  - é€šçŸ¥è®¾ç½®
  - éšç§è®¾ç½®
  - å¸®åŠ©
  - å…³äº

**å…³äºé¡µé¢åŠŸèƒ½ï¼š**
- è½¯ä»¶ä»‹ç»å†…å®¹
- ç‰ˆæœ¬ä¿¡æ¯å±•ç¤º
- **ç‰ˆæœ¬æ£€æŸ¥æŒ‰é’®**ï¼šç‚¹å‡»åæ£€æµ‹æ–°ç‰ˆæœ¬å¹¶æ”¯æŒä¸‹è½½

### 3. ç‰ˆæœ¬æ›´æ–°æ¨é€åŠŸèƒ½

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- ç‰ˆæœ¬æ£€æŸ¥æœºåˆ¶
- æ›´æ–°æç¤ºå’Œä¸‹è½½
- æ¨é€é€šçŸ¥é›†æˆ

## æŠ€æœ¯æ¶æ„è®¾è®¡

### 1. é¡µé¢å¯¼èˆªç»“æ„
**ä¸»è¦é¡µé¢é—´çš„å…³ç³»ï¼ˆå¯¼èˆªæµç¨‹ï¼‰**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        é¡µé¢å…³ç³»æ ‘                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PersonalCenterPage  â”‚      â”‚    BottomNavigationBar   â”‚   â”‚
â”‚  â”‚  (ä¸ªäººä¸­å¿ƒé¡µé¢)      â”‚      â”‚    (åº•éƒ¨å¯¼èˆªæ )           â”‚   â”‚
â”‚  â”‚                     â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚ â”œâ”€ ç¼–è¾‘èµ„æ–™æŒ‰é’®      â”‚      â”‚  â”œâ”€ FeedPage            â”‚   â”‚
â”‚  â”‚ â””â”€ è®¾ç½®æŒ‰é’® â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â†’ SettingsPage          â”‚   â”‚
â”‚  â”‚      â”‚             â”‚      â”‚  â”œâ”€ GalleryPage         â”‚   â”‚
â”‚  â”‚      â”‚             â”‚      â”‚  â”œâ”€ PostPage            â”‚   â”‚
â”‚  â”‚      â”‚             â”‚      â”‚  â”œâ”€ MessagePage         â”‚   â”‚
â”‚  â”‚      â”‚             â”‚      â”‚  â””â”€ PersonalCenterPage  â”‚   â”‚
â”‚  â”‚      â”‚             â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚      â–¼             â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ EditProfilePageâ”‚  â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ (ç¼–è¾‘èµ„æ–™é¡µé¢)   â”‚  â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ (æœªæ¥æ‰©å±•)      â”‚  â”‚      â”‚                          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                                                   â”‚
â”‚             â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚        SettingsPage           â”‚                             â”‚
â”‚  â”‚        (è®¾ç½®é¡µé¢)              â”‚                             â”‚
â”‚  â”‚                              â”‚                             â”‚
â”‚  â”‚  â”œâ”€ è´¦å·ä¸å®‰å…¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ AccountSecurityPage        â”‚
â”‚  â”‚  â”œâ”€ é€šç”¨è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ GeneralSettingsPage        â”‚
â”‚  â”‚  â”œâ”€ é€šçŸ¥è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ NotificationSettingsPage   â”‚
â”‚  â”‚  â”œâ”€ éšç§è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ PrivacySettingsPage        â”‚
â”‚  â”‚  â”œâ”€ å¸®åŠ© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ HelpPage                  â”‚
â”‚  â”‚  â””â”€ å…³äº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â†’ AboutPage                 â”‚
â”‚  â”‚                              â”‚                             â”‚
â”‚  â”‚                              â–¼                             â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚                    â”‚   AboutPage     â”‚                     â”‚
â”‚  â”‚                    â”‚   (å…³äºé¡µé¢)     â”‚                     â”‚
â”‚  â”‚                    â”‚                 â”‚                     â”‚
â”‚  â”‚                    â”‚ â”œâ”€ ç‰ˆæœ¬ä¿¡æ¯      â”‚                     â”‚
â”‚  â”‚                    â”‚ â””â”€ æ£€æµ‹ç‰ˆæœ¬æŒ‰é’® â”€â”¼â”€â†’ VersionCheckDialog â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚  â”‚                                        â”‚                     â”‚
â”‚  â”‚                                        â–¼                     â”‚
â”‚  â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                               â”‚VersionCheckDialogâ”‚            â”‚
â”‚  â”‚                               â”‚(ç‰ˆæœ¬æ£€æŸ¥å¯¹è¯æ¡†)  â”‚            â”‚
â”‚  â”‚                               â”‚                 â”‚            â”‚
â”‚  â”‚                               â”‚ â”œâ”€ æ£€æŸ¥ç‰ˆæœ¬      â”‚            â”‚
â”‚  â”‚                               â”‚ â””â”€ ç«‹å³ä¸‹è½½ â”€â”€â”€â”€â”€â”¼â”€â†’Download  â”‚
â”‚  â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Progress   â”‚
â”‚  â”‚                                                            Dialog    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                               (ä¸‹è½½è¿›åº¦å¯¹è¯æ¡†)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é¡µé¢æ–‡ä»¶ç»“æ„ï¼š**
```
lib/pages/
â”œâ”€â”€ PersonalCenterPage.dart     # ä¸ªäººä¸­å¿ƒé¡µé¢
â”œâ”€â”€ SettingsPage.dart           # è®¾ç½®é¡µé¢
â”œâ”€â”€ AccountSecurityPage.dart    # è´¦å·ä¸å®‰å…¨
â”œâ”€â”€ GeneralSettingsPage.dart    # é€šç”¨è®¾ç½®  
â”œâ”€â”€ NotificationSettingsPage.dart # é€šçŸ¥è®¾ç½®
â”œâ”€â”€ PrivacySettingsPage.dart    # éšç§è®¾ç½®
â”œâ”€â”€ HelpPage.dart              # å¸®åŠ©
â”œâ”€â”€ AboutPage.dart             # å…³äºé¡µé¢
â””â”€â”€ EditProfilePage.dart        # ç¼–è¾‘èµ„æ–™é¡µé¢ (æœªæ¥æ‰©å±•)
```

**å¯¹è¯æ¡†æ–‡ä»¶ï¼š**
```
lib/widgets/dialogs/
â”œâ”€â”€ VersionCheckDialog.dart     # ç‰ˆæœ¬æ£€æŸ¥å¯¹è¯æ¡†
â””â”€â”€ DownloadProgressDialog.dart # ä¸‹è½½è¿›åº¦å¯¹è¯æ¡†
```

### 2. æ•°æ®æ¨¡å‹è®¾è®¡

#### ç”¨æˆ·ä¿¡æ¯æ¨¡å‹
```dart
// åœ¨ lib/network/user_manager.dart ä¸­å®šä¹‰
class UserInfo {
  final String id;
  final String username;
  final String? maskedPhone; // è„±æ•æ‰‹æœºå·ï¼Œå¦‚ï¼š138****5678
  final String? name;
  final String? avatar;
  final String bio;
  final DateTime createdAt;
  final DateTime updatedAt;
  final List<String> roles; // è§’è‰²åˆ—è¡¨
  
  // ç»Ÿè®¡æ•°æ®ï¼ˆéœ€è¦ä»APIè·å–æˆ–è®¡ç®—ï¼‰
  final int? postCount;
  final int? followerCount;
  final int? followingCount;
  final List<UGCContent>? ugcContents;
  
  // æ³¨æ„ï¼š
  // 1. ä¸åŒ…å«genderå­—æ®µ - éšç§ä¿æŠ¤
  // 2. phoneå­—æ®µæ”¹ä¸ºmaskedPhone - æ‰‹æœºå·è„±æ•å¤„ç†
  // 3. çœŸå®æ‰‹æœºå·éœ€è¦é€šè¿‡å®¡è®¡æµç¨‹è·å–
  
  // æ•æ„Ÿä¿¡æ¯å®¡è®¡æµç¨‹è¯´æ˜ï¼š
  // - è·å–çœŸå®æ‰‹æœºå·éœ€è¦é€šè¿‡ä¸“é—¨çš„APIæ¥å£
  // - éœ€è¦éªŒè¯ç”¨æˆ·æƒé™ï¼ˆæœ¬äººæˆ–ç®¡ç†å‘˜ï¼‰
  // - æ‰€æœ‰æŸ¥çœ‹è¡Œä¸ºéƒ½ä¼šè¢«è®°å½•åˆ°å®¡è®¡æ—¥å¿—
  // - å‰ç«¯éœ€è¦æä¾›æ•æ„Ÿä¿¡æ¯æŸ¥çœ‹çš„ç¡®è®¤å¯¹è¯æ¡†
  
  UserInfo({
    required this.id,
    required this.username,
    this.maskedPhone,
    this.name,
    this.avatar,
    required this.bio,
    required this.createdAt,
    required this.updatedAt,
    required this.roles,
    this.postCount,
    this.followerCount,
    this.followingCount,
    this.ugcContents,
  });
  
  /// ä» Map æ•°æ®åˆ›å»º UserInfo
  factory UserInfo.fromJson(Map<String, dynamic> json) {
    return UserInfo(
      id: json['id'] ?? '',
      username: json['username'],
      maskedPhone: json['phone'],
      name: json['name'],
      avatar: json['avatar'],
      bio: json['bio'] ?? '',
      createdAt: DateTime.parse(json['createdAt'] ?? DateTime.now().toIso8601String()),
      updatedAt: DateTime.parse(json['updatedAt'] ?? DateTime.now().toIso8601String()),
      roles: List<String>.from(json['roles'] ?? []),
      postCount: json['postCount'],
      followerCount: json['followerCount'],
      followingCount: json['followingCount'],
      ugcContents: json['ugcContents'] != null 
          ? (json['ugcContents'] as List).map((e) => UGCContent.fromJson(e)).toList()
          : null,
    );
  }
  
  /// è½¬æ¢ä¸º Map æ•°æ®
  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'username': username,
      'phone': maskedPhone,
      'name': name,
      'avatar': avatar,
      'bio': bio,
      'createdAt': createdAt.toIso8601String(),
      'updatedAt': updatedAt.toIso8601String(),
      'roles': roles,
      'postCount': postCount,
      'followerCount': followerCount,
      'followingCount': followingCount,
      'ugcContents': ugcContents?.map((e) => e.toJson()).toList(),
    };
  }
  
  /// ç©ºç”¨æˆ·ä¿¡æ¯
  static UserInfo empty() {
    return UserInfo(
      id: '',
      bio: '',
      createdAt: DateTime.now(),
      updatedAt: DateTime.now(),
      roles: [],
    );
  }
}

/// UGC å†…å®¹æ¨¡å‹
class UGCContent {
  final String id;
  final String title;
  final String content;
  final DateTime createdAt;
  final int likeCount;
  final int commentCount;
  
  UGCContent({
    required this.id,
    required this.title,
    required this.content,
    required this.createdAt,
    required this.likeCount,
    required this.commentCount,
  });
  
  factory UGCContent.fromJson(Map<String, dynamic> json) {
    return UGCContent(
      id: json['id'] ?? '',
      title: json['title'] ?? '',
      content: json['content'] ?? '',
      createdAt: DateTime.parse(json['createdAt'] ?? DateTime.now().toIso8601String()),
      likeCount: json['likeCount'] ?? 0,
      commentCount: json['commentCount'] ?? 0,
    );
  }
  
  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'title': title,
      'content': content,
      'createdAt': createdAt.toIso8601String(),
      'likeCount': likeCount,
      'commentCount': commentCount,
    };
  }
}
```

#### ç‰ˆæœ¬ä¿¡æ¯æ¨¡å‹
```dart
class VersionInfo {
  final String versionCode;
  final String versionName;
  final String updateDescription;
  final String downloadUrl;
  final int fileSize;
  final bool isForceUpdate;
  final String minSupportedVersion;
}
```

#### è®¾ç½®é¡¹æ¨¡å‹
```dart
class SettingItem {
  final String title;
  final String subtitle;
  final SettingType type;
  final Function()? onTap;
  final Widget? trailing;
}

enum SettingType {
  navigation, // å¯¼èˆªåˆ°å…¶ä»–é¡µé¢
  toggle,     // å¼€å…³åˆ‡æ¢
  action,     // æ‰§è¡ŒåŠ¨ä½œ
  info        // ä¿¡æ¯å±•ç¤º
}
```

### 3. æ§åˆ¶å™¨è®¾è®¡

#### PersonalCenterController (ç”¨æˆ·ä¸­å¿ƒçš„æ“ä½œæ„å›¾æ§åˆ¶å±‚)
```dart
class PersonalCenterController extends GetxController {
  /// ç”¨æˆ·ä¸­å¿ƒæ“ä½œæ„å›¾æ§åˆ¶ï¼š
  /// - ä¸ç›´æ¥ç»´æŠ¤GUIçŠ¶æ€ï¼ŒGUIçŠ¶æ€ç”±Widgetå†…éƒ¨å¤„ç†
  /// - ä¸“æ³¨äºä¸šåŠ¡æ„å›¾çš„å¤„ç†å’Œè§¦å‘
  
  // ä¸ç›´æ¥æŒæœ‰æ•°æ®ï¼Œé€šè¿‡ UserManager è·å–
  UserInfo? get currentUser => UserManager.currentUser;
  
  /// åŠ è½½ç”¨æˆ·ä¿¡æ¯çš„ä¸šåŠ¡æ„å›¾
  Future<void> handleLoadProfileIntent() async {
    // ä¸šåŠ¡é€»è¾‘ï¼šè°ƒç”¨ UserManager åŠ è½½æ•°æ®
    await UserManager.loadUserProfile();
    // GUIçŠ¶æ€æ›´æ–°ç”±Widgetå†…éƒ¨çš„Stateå¤„ç†
  }
  
  /// åˆ·æ–°ç”¨æˆ·ä¿¡æ¯çš„ä¸šåŠ¡æ„å›¾
  Future<void> handleRefreshProfileIntent() async {
    // ä¸šåŠ¡é€»è¾‘ï¼šåˆ·æ–°ç”¨æˆ·æ•°æ®
    await UserManager.refreshUserProfile();
    // GUIçŠ¶æ€æ›´æ–°ç”±Widgetå†…éƒ¨çš„Stateå¤„ç†
  }
  
  /// ç™»å‡ºä¸šåŠ¡æ„å›¾
  Future<void> handleLogoutIntent() async {
    // ä¸šåŠ¡é€»è¾‘ï¼šæ¸…é™¤ç”¨æˆ·æ•°æ®
    await UserManager.clear();
    // å¯¼èˆªæ„å›¾ï¼šè·³è½¬åˆ°ç™»å½•é¡µé¢
    Get.offAllNamed(Routes.login);
  }
  
  /// å¯¼èˆªåˆ°è®¾ç½®é¡µé¢çš„æ„å›¾
  void handleNavigateToSettingsIntent() {
    Get.toNamed(Routes.settings);
  }
  
  /// å¯¼èˆªåˆ°ç¼–è¾‘èµ„æ–™é¡µé¢çš„æ„å›¾
  void handleNavigateToEditProfileIntent() {
    Get.toNamed(Routes.editProfile);
  }
  
  /// åŠ è½½ç»Ÿè®¡æ•°æ®çš„æ„å›¾
  Future<void> handleLoadStatisticsIntent() async {
    // ä¸šåŠ¡é€»è¾‘ï¼šè·å–ç”¨æˆ·ç»Ÿè®¡æ•°æ®
    await UserManager.loadUserStatistics();
  }
  
  /// åŠ è½½UGCå†…å®¹çš„æ„å›¾
  Future<void> handleLoadUGCContentIntent() async {
    // ä¸šåŠ¡é€»è¾‘ï¼šè·å–ç”¨æˆ·UGCå†…å®¹
    await UserManager.loadUserUGCContent();
  }
}
```

#### UserManager (æ‰©å±•è®¾è®¡)
```dart
// åœ¨ lib/network/user_manager.dart ä¸­
class UserManager {
  // ... ç°æœ‰ä»£ç ä¿æŒä¸å˜ ...
  
  static UserInfo? _currentUser;
  static UserInfo? get currentUser => _currentUser;
  
  /// åŠ è½½å®Œæ•´ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å«ç»Ÿè®¡æ•°æ®å’ŒUGCå†…å®¹ï¼‰
  static Future<void> loadUserProfile() async {
    try {
      // 1. è·å–åŸºç¡€ç”¨æˆ·ä¿¡æ¯
      final basicUserInfo = await getUserInfoAsync();
      if (basicUserInfo == null) {
        throw Exception('ç”¨æˆ·æœªç™»å½•');
      }
      
      // 2. è½¬æ¢ä¸º UserInfo å¯¹è±¡
      _currentUser = UserInfo.fromJson(basicUserInfo);
      
      // 3. è·å–ç»Ÿè®¡æ•°æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰
      await _loadUserStatistics();
      
      // 4. è·å–UGCå†…å®¹ï¼ˆå¦‚æœéœ€è¦ï¼‰
      await _loadUserUGCContent();
      
    } catch (e) {
      print('åŠ è½½ç”¨æˆ·ä¿¡æ¯å¤±è´¥: $e');
      rethrow;
    }
  }
  
  /// åˆ·æ–°ç”¨æˆ·ä¿¡æ¯
  static Future<void> refreshUserProfile() async {
    _currentUser = null; // æ¸…é™¤ç¼“å­˜
    await loadUserProfile();
  }
  
  /// è·å–ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
  static Future<void> _loadUserStatistics() async {
    if (_currentUser == null) return;
    
    try {
      // TODO: è°ƒç”¨è·å–ç»Ÿè®¡æ•°æ®çš„API
      // final response = await ApiService.getUserStatistics(_currentUser!.id);
      // æ›´æ–°ç»Ÿè®¡æ•°æ®
    } catch (e) {
      print('è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥: $e');
    }
  }
  
  /// è·å–ç”¨æˆ·UGCå†…å®¹
  static Future<void> _loadUserUGCContent() async {
    if (_currentUser == null) return;
    
    try {
      // TODO: è°ƒç”¨è·å–UGCå†…å®¹çš„API
      // final response = await ApiService.getUserUGCContent(_currentUser!.id);
      // æ›´æ–°UGCå†…å®¹
    } catch (e) {
      print('è·å–UGCå†…å®¹å¤±è´¥: $e');
    }
  }
  
  /// æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  static Future<void> updateUserInfo(Map<String, dynamic> updates) async {
    final currentInfo = await getUserInfoAsync();
    if (currentInfo != null) {
      currentInfo.addAll(updates);
      await setUserInfo(currentInfo);
      
      // æ›´æ–°å½“å‰ç”¨æˆ·å¯¹è±¡
      if (_currentUser != null) {
        _currentUser = UserInfo.fromJson(currentInfo);
      }
    }
  }
}
```

#### SettingsController
```dart
class SettingsController extends GetxController {
  final settings = <SettingItem>[].obs;
  final isLoading = false.obs;
  
  void initializeSettings() {
    settings.value = [
      SettingItem(
        title: 'è´¦å·ä¸å®‰å…¨',
        subtitle: 'ä¿®æ”¹å¯†ç ã€ç»‘å®šæ‰‹æœºç­‰',
        type: SettingType.navigation,
        onTap: () => Get.toNamed(Routes.accountSecurity),
      ),
      SettingItem(
        title: 'é€šç”¨è®¾ç½®',
        subtitle: 'è¯­è¨€ã€ä¸»é¢˜ç­‰',
        type: SettingType.navigation,
        onTap: () => Get.toNamed(Routes.generalSettings),
      ),
      // ... å…¶ä»–è®¾ç½®é¡¹
    ];
  }
  
  void updateSetting(String key, dynamic value) {
    // æ›´æ–°è®¾ç½®é¡¹
    settings.refresh();
  }
  
  Future<void> clearCache() async {
    try {
      isLoading.value = true;
      // æ¸…é™¤å„ç§ç¼“å­˜
      await Future.wait([
        // æ¸…é™¤å›¾ç‰‡ç¼“å­˜
        // æ¸…é™¤æ•°æ®ç¼“å­˜
      ]);
      Get.snackbar('æç¤º', 'ç¼“å­˜æ¸…é™¤æˆåŠŸ');
    } catch (e) {
      Get.snackbar('é”™è¯¯', 'ç¼“å­˜æ¸…é™¤å¤±è´¥: $e');
    } finally {
      isLoading.value = false;
    }
  }
}
```

#### VersionController
```dart
class VersionController extends GetxController {
  final currentVersion = ''.obs;
  final latestVersion = ''.obs;
  final isChecking = false.obs;
  final isDownloading = false.obs;
  final downloadProgress = 0.0.obs;
  
  Future<VersionInfo?> checkForUpdates();
  Future<void> downloadAndInstall(VersionInfo versionInfo);
  void showUpdateDialog(VersionInfo versionInfo);
}
```

## API æ¥å£è®¾è®¡

### 1. ç‰ˆæœ¬æ£€æŸ¥ API

**æ¥å£åœ°å€ï¼š** `/api/version/check`

**è¯·æ±‚æ–¹æ³•ï¼š** GET

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "platform": "android",
  "current_version": "1.0.0",
  "channel": "dev"
}
```

**å“åº”æ•°æ®ï¼š**
```json
{
  "success": true,
  "data": {
    "has_update": true,
    "version_code": 10001,
    "version_name": "1.0.1",
    "update_description": "ä¿®å¤äº†ä¸€äº›bugå¹¶æ–°å¢äº†åŠŸèƒ½",
    "download_url": "https://example.com/app-release.apk",
    "file_size": 15728640,
    "is_force_update": false,
    "min_supported_version": "1.0.0"
  }
}
```

### 2. è·å–ç”¨æˆ·ä¿¡æ¯ API

**æ¥å£åœ°å€ï¼š** `/api/user/profile`

**è¯·æ±‚æ–¹æ³•ï¼š** GET

**å“åº”æ•°æ®ï¼š**
```json
{
  "success": true,
  "data": {
    "id": "user_123",
    "avatar": "https://example.com/avatar.jpg",
    "name": "å¼ ä¸‰",
    "gender": "ç”·",
    "bio": "è¿™æ˜¯ä¸€ä¸ªç®€ä»‹",
    "post_count": 15,
    "follower_count": 128,
    "following_count": 64,
    "ugc_contents": []
  }
}
```

## UI/UX è®¾è®¡æ–¹æ¡ˆ

### 1. ProfilePage å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä¸ªäººä¸­å¿ƒåŒºåŸŸ (200dp)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ç”¨æˆ·ä¿¡æ¯ + ç»Ÿè®¡æ•°æ®    â”‚
â”‚  â”‚ å¤´åƒ    â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ç¼–è¾‘èµ„æ–™    è®¾ç½®               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            UGC å†…å®¹åˆ—è¡¨               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¸–å­1                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ å¸–å­2                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. SettingsPage å¸ƒå±€è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è®¾ç½®                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€ è´¦å·ä¸å®‰å…¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€ é€šç”¨è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€ é€šçŸ¥è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€ éšç§è®¾ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€ å¸®åŠ© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€ å…³äº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ç‰ˆæœ¬: v1.0.0                â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚     æ£€æµ‹ç‰ˆæœ¬æ›´æ–°        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯å®ç°ç»†èŠ‚

### 1. ä¾èµ–åº“

```yaml
dependencies:
  http: ^1.1.0          # HTTP è¯·æ±‚
  package_info_plus: ^4.2.0  # åº”ç”¨ä¿¡æ¯
  permission_handler: ^11.0.1  # æƒé™ç®¡ç†
  url_launcher: ^6.2.1    # æ‰“å¼€ä¸‹è½½é“¾æ¥
  flutter_localizations:
    sdk: flutter
```

### 2. å…³é”®å®ç°ç‚¹

#### æƒé™å¤„ç†
- **Android**ï¼šéœ€è¦ `REQUEST_INSTALL_PACKAGES` æƒé™
- **iOS**ï¼šä½¿ç”¨ç³»ç»Ÿæ›´æ–°æœºåˆ¶

#### ä¸‹è½½å®‰è£…æµç¨‹
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç”³è¯·å­˜å‚¨æƒé™
3. ä¸‹è½½ APK æ–‡ä»¶
4. è§¦å‘å®‰è£…

#### ç‰ˆæœ¬æ£€æŸ¥ç­–ç•¥
- å¯åŠ¨æ—¶æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰
- æ‰‹åŠ¨æ£€æŸ¥ï¼ˆè®¾ç½®é¡µé¢ï¼‰
- å®šæœŸæ£€æŸ¥ï¼ˆåå°ä»»åŠ¡ï¼‰

### 3. é”™è¯¯å¤„ç†

#### ç½‘ç»œå¼‚å¸¸
- æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
- æ”¯æŒé‡è¯•æœºåˆ¶

#### ä¸‹è½½å¤±è´¥
- æ–­ç‚¹ç»­ä¼ æ”¯æŒ
- é”™è¯¯æ—¥å¿—è®°å½•

#### ç‰ˆæœ¬å…¼å®¹
- æ£€æŸ¥æœ€ä½æ”¯æŒç‰ˆæœ¬
- å‘åå…¼å®¹æ€§å¤„ç†

## å¼€å‘è®¡åˆ’

### Phase 1: åŸºç¡€é¡µé¢ç»“æ„
1. âœ… éœ€æ±‚åˆ†æå’ŒæŠ€æœ¯æ–‡æ¡£
2. ğŸ”„ ä¸ªäººä¿¡æ¯é¡µé¢ UI é‡æ„
3. è®¾ç½®é¡µé¢åŸºç¡€æ¡†æ¶
4. å…³äºé¡µé¢å®ç°

### Phase 2: ç‰ˆæœ¬æ›´æ–°åŠŸèƒ½
1. ç‰ˆæœ¬æ£€æŸ¥ API é›†æˆ
2. ä¸‹è½½å®‰è£…åŠŸèƒ½å®ç°
3. æ›´æ–°å¼¹çª—è®¾è®¡

### Phase 3: ä¼˜åŒ–å’Œæµ‹è¯•
1. UI/UX ä¼˜åŒ–
2. æ€§èƒ½ä¼˜åŒ–
3. æµ‹è¯•å’Œè°ƒè¯•

## é£é™©è¯„ä¼°

### æŠ€æœ¯é£é™©
- **Android APK å®‰è£…æƒé™**ï¼šéœ€è¦é€‚é…ä¸åŒ Android ç‰ˆæœ¬
- **ç½‘ç»œç¯å¢ƒ**ï¼šå¼±ç½‘ç¯å¢ƒä¸‹çš„ä¸‹è½½ä½“éªŒ
- **ç‰ˆæœ¬å…¼å®¹**ï¼šæ–°ç‰ˆæœ¬ä¸è€ç‰ˆæœ¬çš„å…¼å®¹æ€§

### äº§å“é£é™©
- **ç”¨æˆ·ä¹ æƒ¯**ï¼šæ–°ç‰ˆæœ¬æ›´æ–°æµç¨‹çš„ç”¨æˆ·æ¥å—åº¦
- **æ›´æ–°æ—¶æœº**ï¼šå¼ºåˆ¶æ›´æ–°çš„æ—¶æœºé€‰æ‹©

## æ€»ç»“

æœ¬æŠ€æœ¯æ–‡æ¡£è¯¦ç»†è§„åˆ’äº† ex1 é¡¹ç›®çš„è½¯ä»¶ç‰ˆæœ¬æ›´æ–°æ¨é€åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸ªäººä¿¡æ¯é¡µé¢æ”¹è¿›ã€è®¾ç½®é¡µé¢è®¾è®¡å’Œç‰ˆæœ¬æ›´æ–°æœºåˆ¶ã€‚é€šè¿‡åˆ†é˜¶æ®µå®æ–½ï¼Œå¯ä»¥ç¡®ä¿åŠŸèƒ½çš„ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒçš„ä¼˜åŒ–ã€‚

é‡ç‚¹å…³æ³¨ç‰ˆæœ¬æ£€æŸ¥å’Œä¸‹è½½å®‰è£…çš„å¯é æ€§ï¼Œä»¥åŠæ•´ä½“é¡µé¢çš„ç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€‚